{% extends 'base.html' %}
{% load static %}

{% block title %}{{ student.student_name }} - Profile{% endblock %}

{% block extrastyles %}
<link rel="stylesheet" href="{% static 'accounts/recruiter_dashboard.css' %}">
<style>
.main-content {
    margin-left: 250px;
    padding: 20px;
    min-height: 100vh;
    background: #f8f9fa;
}

@media (max-width: 768px) {
    .main-content {
        margin-left: 0;
        padding: 15px;
    }
}

.profile-header {
    padding: 2rem;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    margin-bottom: 2rem;
}

@media (max-width: 768px) {
    .profile-header {
        padding: 1.5rem;
    }
    
    .profile-header .row {
        flex-direction: column;
    }
    
    .profile-header .col-md-3 {
        margin-bottom: 2rem;
    }
    
    .profile-header .d-flex.gap-3 {
        flex-direction: column;
        gap: 1rem !important;
    }
    
    .profile-header .btn {
        width: 100%;
        margin-bottom: 0.5rem;
    }
}

.profile-image {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
}

@media (max-width: 768px) {
    .profile-image {
        width: 100px;
        height: 100px;
        margin-bottom: 1rem;
    }
}

.skill-tag {
    background: #ffe4e1;
    color: #ff1493;
    padding: 0.25rem 0.75rem;
    border-radius: 15px;
    font-size: 0.875rem;
    margin-right: 0.5rem;
    margin-bottom: 0.5rem;
    display: inline-block;
}

.project-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}

@media (max-width: 768px) {
    .project-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .project-card {
        margin-bottom: 1.5rem;
    }
    
    .project-content {
        padding: 1rem;
    }
    
    .project-tags {
        flex-wrap: wrap;
    }
}
</style>
{% endblock %}

{% block content %}
{% include 'accounts/recruiter_sidebar.html' with active_tab='talent' %}

<div class="main-content">
<div class="container py-4">
    <div class="profile-header">
        <div class="row">
            <div class="col-md-3 text-center">
                <img src="{% if student.image %}{{ student.image.url }}{% else %}{% static 'accounts/default_profile.png' %}{% endif %}" 
                     alt="{{ student.student_name }}" class="profile-image mb-3">
                <button class="btn {% if is_saved %}btn-pink{% else %}btn-outline-pink{% endif %} save-profile-btn w-100"
                        data-student-id="{{ student.id }}">
                    <i class="fas fa-bookmark me-2"></i>
                    {% if is_saved %}Saved{% else %}Save Profile{% endif %}
                </button>
            </div>
            <div class="col-md-9">
                <h2 class="mb-3">{{ student.student_name }}</h2>
                <p class="text-muted mb-2">{{ student.course_details }}</p>
                <p class="mb-3">{{ student.bio|default:"" }}</p>
                <div class="mb-4">
                    <h5 class="mb-2">Skills & Technologies</h5>
                    <div>
                        {% for project in projects %}
                            {% for tag in project.tags.split %}
                                <span class="skill-tag">{{ tag }}</span>
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>
                <div class="d-flex gap-3">
                    <a href="mailto:{{ student.student_email }}" class="btn btn-pink">
                        <i class="fas fa-envelope me-2"></i>Contact
                    </a>
                    <button class="btn btn-outline-pink" data-bs-toggle="modal" data-bs-target="#hireModal">
                        <i class="fas fa-handshake me-2"></i>Hire
                    </button>
                </div>
            </div>
        </div>
    </div>

    <h4 class="mb-3">Projects</h4>
    <div class="project-grid">
        {% for project in projects %}
        <div class="project-card">
            <img src="{% if project.screenshot %}{{ project.screenshot.url }}{% else %}{% static 'accounts/project_placeholder.png' %}{% endif %}" 
                 alt="{{ project.title }}" class="project-image w-100">
            <div class="project-content">
                <h5>{{ project.title }}</h5>
                <p class="text-muted">{{ project.description|truncatechars:100 }}</p>
                <div class="project-tags mb-3">
                    {% for tag in project.tags.split %}
                    <span class="project-tag">{{ tag }}</span>
                    {% endfor %}
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <a href="{% url 'view_project_details' project.id %}" class="btn btn-pink btn-sm">View Details</a>
                    <div>
                        <button class="btn btn-outline-pink btn-sm share-project-btn" data-project-url="{% url 'view_project_details' project.id %}">
                            <i class="fas fa-share"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Hire Modal -->
<div class="modal fade" id="hireModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Hire {{ student.student_name }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="hireForm">
                    <div class="mb-3">
                        <label class="form-label">Job Title</label>
                        <input type="text" name="job_title" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Message</label>
                        <textarea name="message" class="form-control" rows="4" required></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-pink" onclick="submitHireForm()">Send Request</button>
            </div>
        </div>
    </div>
</div>

{% block extrascripts %}
<script src="{% static 'accounts/student_profile_recruiter.js' %}"></script>
<script>
function submitHireForm() {
    // Implementation for hire form submission
    const form = document.getElementById('hireForm');
    // Add your hire request submission logic here
    $('#hireModal').modal('hide');
}
</script>
{% endblock %}

{% endblock content %}